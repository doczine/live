<?php
error_reporting(E_ALL);
echo exec('whoami');
require_once('/var/www/etriever/pdflib/fpdf17/pdf_parser.php');
require_once('/var/www/etriever/pdflib/fpdf17/fpdf.php');
require_once('/var/www/etriever/pdflib/fpdf_tpl.php');
require_once('/var/www/etriever/pdflib/fpdi.php');

function create_base_mysqli_test() {
    $result = new mysqli("alps.ist.berkeley.edu", "entry", "tts,atosdtoami", "test", 3337);
    if (!$result)
        throw new Exception('Could not connect to database server');
    else
        return $result;
}

$conn = create_base_mysqli_test();

$student_id= "";
$student_name= "";
$email_verify= "";
$major= "";
$mailing_address= "";
$city= "";
$state= "";
$zip= "";
$phone= "";
$mailing_address_second= "";
$city_second= "";
$state_second= "";
$zip_second= "";
$dept_cd_text_1= "";
$course_title_text_1= "";
$unit_text_1= "";
$dept_cd_text_2= "";
$course_title_text_2= "";
$unit_text_2= "";
$dept_cd_text_3= "";
$course_title_text_3= "";
$unit_text_3= "";
$dept_cd_text_4= "";
$course_title_text_4= "";
$unit_text_4= "";
$dept_cd_text_5= "";
$course_title_text_5= "";
$unit_text_5= "";
$dept_cd_text_6= "";
$course_title_text_6= "";
$unit_text_6= "";
$dept_cd_text_7= "";
$course_title_text_7= "";
$unit_text_7= "";
$dept_cd_text_8= "";
$course_title_text_8= "";
$unit_text_8= "";
$dept_cd_text_9= "";
$course_title_text_9= "";
$unit_text_9= "";
$dept_cd_text_10= "";
$course_title_text_10= "";
$unit_text_10= "";
$dept_cd_text_11= "";
$course_title_text_11= "";
$unit_text_11= "";
$dept_cd_text_12= "";
$course_title_text_12= "";
$unit_text_12= "";
$notes= "";
$pdf_key = strip_tags(stripslashes($_GET['pdf_id']));
$student_id = strip_tags(stripslashes($_GET['student_id']));

if(isset($_GET['pdf_id']) && isset($_GET['student_id'])) {
$query = "SELECT DISTINCT `autoincrement`,`student_id`,`student_name`,`email_verify`,`major`,`mailing_address`,`city`,`state`,`zip`,`phone`,`pdf_key`,`time`,`mailing_address_second`,`city_second`,`state_second`,`zip_second`,`dept_cd_text_1`,`course_title_text_1`,`unit_text_1`,`dept_cd_text_2`,`course_title_text_2`,`unit_text_2`,`dept_cd_text_3`,`course_title_text_3`,`unit_text_3`,`dept_cd_text_4`,`course_title_text_4`,`unit_text_4`,`dept_cd_text_5`,`course_title_text_5`,`unit_text_5`,`dept_cd_text_6`,`course_title_text_6`,`unit_text_6`,`dept_cd_text_7`,`course_title_text_7`,`unit_text_7`,`dept_cd_text_8`,`course_title_text_8`,`unit_text_8`,`dept_cd_text_9`,`course_title_text_9`,`unit_text_9`,`dept_cd_text_10`,`course_title_text_10`,`unit_text_10`,`dept_cd_text_11`,`course_title_text_11`,`unit_text_11`,`dept_cd_text_12`,`course_title_text_12`,`unit_text_12`,`notes` FROM `test`.`test` WHERE `student_id` = '".$student_id."' AND `pdf_key` = '".$pdf_key."';";
    if ($stmt = mysqli_prepare($conn, $query)) {
        mysqli_stmt_execute($stmt);
        mysqli_stmt_bind_result($stmt, $autoincrement, $student_id, $student_name, $email_verify, $major, $mailing_address, $city, $state, $zip, $phone, $pdf_key, $time, $mailing_address_second, $city_second, $state_second, $zip_second, $dept_cd_text_1, $course_title_text_1, $unit_text_1, $dept_cd_text_2, $course_title_text_2, $unit_text_2, $dept_cd_text_3, $course_title_text_3, $unit_text_3, $dept_cd_text_4, $course_title_text_4, $unit_text_4, $dept_cd_text_5, $course_title_text_5, $unit_text_5, $dept_cd_text_6, $course_title_text_6, $unit_text_6, $dept_cd_text_7, $course_title_text_7, $unit_text_7, $dept_cd_text_8, $course_title_text_8, $unit_text_8, $dept_cd_text_9, $course_title_text_9, $unit_text_9, $dept_cd_text_10, $course_title_text_10, $unit_text_10, $dept_cd_text_11, $course_title_text_11, $unit_text_11, $dept_cd_text_12, $course_title_text_12, $unit_text_12, $notes);
        while (mysqli_stmt_fetch($stmt)){
        }
        mysqli_stmt_close($stmt);
    }
}

$pdf = new FPDI();
$pdf->AddPage();
$pdf->setSourceFile('/var/www/etriever/html/pdf/24Intent_To_Grad.pdf');
$tplIdx = $pdf->importPage(1);
$pdf->useTemplate($tplIdx, 0, 0, 0);
$specs = $pdf->getTemplateSize($tplIdx);
//print_r($specs);
$pdf->SetFont('Arial');
$pdf->SetTextColor(255,0,0);
$pdf->SetXY(150, 68);
$pdf->Write(0, $student_id);
$pdf->SetXY(15, 68);
$pdf->Write(0, $student_name);
$pdf->SetXY(15, 100);
$pdf->Write(0, $email_verify);
$pdf->SetXY(15, 84);
$pdf->Write(0, $mailing_address);
$pdf->SetXY(85, 84);
$pdf->Write(0, $city);
$pdf->SetXY(145, 84);
$pdf->Write(0, $state);
$pdf->SetXY(175, 84);
$pdf->Write(0, $zip);
$pdf->SetXY(145, 100);
$pdf->Write(0, $phone);
$pdf->SetXY(125, 117);
$pdf->Write(0, $pickup);
$pdf->SetXY(40, 140);
$pdf->Write(0, $mailing_address_second);
$pdf->SetXY(100, 140);
$pdf->Write(0, $city_second);
$pdf->SetXY(150, 140);
$pdf->Write(0, $state_second);
$pdf->SetXY(180, 140);
$pdf->Write(0, $zip_second);
$pdf->SetXY(45, 215);
$pdf->Write(0, $degree_list_checkbox);
$pdf->SetXY(45, 220.5);
$pdf->Write(0, $study_list_checkbox);
$pdf->SetXY(45, 227);
$pdf->Write(0, $memo_checkbox);

$pdf->SetXY(17, 175);
$pdf->Write(0, "Please see current study list on second page.");

$timestamp = date("Y-m-d H:i:s");
$pdf->SetXY(10, 250);
$pdf->Write(0, "eTriever Unique ID:");
$rand = rand(100000, 999999);
$pdf->SetXY(48, 250);
$pdf->Write(0, $rand);
$pdf->SetXY(110, 250);
$pdf->Write(0, "Date Timestamp: ".$timestamp);
$pdf->SetXY(10, 255);
$pdf->Write(0, "This PDF is for reference, keep it for your records, your data has already been submitted.");
$pdf->Output('/var/www/etriever/html/pdf/24Intent_To_Grad_NEW.pdf', 'F');

$pdf1 = new FPDI();
$pdf1->AddPage();
$pdf1->setSourceFile('/var/www/etriever/html/pdf/24Intent_To_Grad_2.pdf');
$tplIdx = $pdf1->importPage(1);
$pdf1->useTemplate($tplIdx, 0, 0, 0);
$pdf1->SetFont('Arial');
$pdf1->SetTextColor(255,0,0);
$pdf1->SetXY(150, 15);
$pdf1->Write(0, "StuID: ".$student_id);

$pdf1->SetXY(15, 15);
$pdf1->Write(0, "Degree of Study: ".$major);
$pdf1->SetXY(15, 20);
$pdf1->Write(0, "Dept              Course Title                       Units        Repeat  PnP");
$pdf1->SetXY(15, 25);
$pdf1->Write(0, $dept_cd_text_1);
$pdf1->SetXY(40, 25);
$pdf1->Write(0, $course_title_text_1);
$pdf1->SetXY(90, 25);
$pdf1->Write(0, $unit_text_1);
$pdf1->SetXY(110, 25);
$pdf1->Write(0, $repeat_yes_1);
$pdf1->SetXY(115, 25);
$pdf1->Write(0, $repeat_no_1);
$pdf1->SetXY(120, 25);
$pdf1->Write(0, $pass_no_pass_no_1);
$pdf1->SetXY(125, 25);
$pdf1->Write(0, $pass_no_pass_yes_1);
$pdf1->SetXY(15, 30);
$pdf1->Write(0, $dept_cd_text_2);
$pdf1->SetXY(40, 30);
$pdf1->Write(0, $course_title_text_2);
$pdf1->SetXY(90, 30);
$pdf1->Write(0, $unit_text_2);
$pdf1->SetXY(110, 30);
$pdf1->Write(0, $repeat_yes_2);
$pdf1->SetXY(115, 30);
$pdf1->Write(0, $repeat_no_2);
$pdf1->SetXY(120, 30);
$pdf1->Write(0, $pass_no_pass_no_2);
$pdf1->SetXY(125, 30);
$pdf1->Write(0, $pass_no_pass_yes_2);
$pdf1->SetXY(15, 35);
$pdf1->Write(0, $dept_cd_text_3);
$pdf1->SetXY(40, 35);
$pdf1->Write(0, $course_title_text_3);
$pdf1->SetXY(90, 35);
$pdf1->Write(0, $unit_text_3);
$pdf1->SetXY(110, 35);
$pdf1->Write(0, $repeat_yes_3);
$pdf1->SetXY(115, 35);
$pdf1->Write(0, $repeat_no_3);
$pdf1->SetXY(120, 35);
$pdf1->Write(0, $pass_no_pass_no_3);
$pdf1->SetXY(125, 35);
$pdf1->Write(0, $pass_no_pass_yes_3);
$pdf1->SetXY(15, 40);
$pdf1->Write(0, $dept_cd_text_4);
$pdf1->SetXY(40, 40);
$pdf1->Write(0, $course_title_text_4);
$pdf1->SetXY(90, 40);
$pdf1->Write(0, $unit_text_4);
$pdf1->SetXY(110, 40);
$pdf1->Write(0, $repeat_yes_4);
$pdf1->SetXY(115, 40);
$pdf1->Write(0, $repeat_no_4);
$pdf1->SetXY(120, 40);
$pdf1->Write(0, $pass_no_pass_no_4);
$pdf1->SetXY(125, 40);
$pdf1->Write(0, $pass_no_pass_yes_4);
$pdf1->SetXY(15, 45);
$pdf1->Write(0, $dept_cd_text_5);
$pdf1->SetXY(40, 45);
$pdf1->Write(0, $course_title_text_5);
$pdf1->SetXY(90, 45);
$pdf1->Write(0, $unit_text_5);
$pdf1->SetXY(110, 45);
$pdf1->Write(0, $repeat_yes_5);
$pdf1->SetXY(115, 45);
$pdf1->Write(0, $repeat_no_5);
$pdf1->SetXY(120, 45);
$pdf1->Write(0, $pass_no_pass_no_5);
$pdf1->SetXY(125, 45);
$pdf1->Write(0, $pass_no_pass_yes_5);
$pdf1->SetXY(15, 50);
$pdf1->Write(0, $dept_cd_text_6);
$pdf1->SetXY(40, 50);
$pdf1->Write(0, $course_title_text_6);
$pdf1->SetXY(90, 50);
$pdf1->Write(0, $unit_text_6);
$pdf1->SetXY(110, 50);
$pdf1->Write(0, $repeat_yes_6);
$pdf1->SetXY(115, 50);
$pdf1->Write(0, $repeat_no_6);
$pdf1->SetXY(120, 50);
$pdf1->Write(0, $pass_no_pass_no_6);
$pdf1->SetXY(125, 50);
$pdf1->Write(0, $pass_no_pass_yes_6);
$pdf1->SetXY(15, 55);
$pdf1->Write(0, $dept_cd_text_7);
$pdf1->SetXY(40, 55);
$pdf1->Write(0, $course_title_text_7);
$pdf1->SetXY(90, 55);
$pdf1->Write(0, $unit_text_7);
$pdf1->SetXY(110, 55);
$pdf1->Write(0, $repeat_yes_7);
$pdf1->SetXY(115, 55);
$pdf1->Write(0, $repeat_no_7);
$pdf1->SetXY(120, 55);
$pdf1->Write(0, $pass_no_pass_no_7);
$pdf1->SetXY(125, 55);
$pdf1->Write(0, $pass_no_pass_yes_7);
$pdf1->SetXY(15, 60);
$pdf1->Write(0, $dept_cd_text_8);
$pdf1->SetXY(40, 60);
$pdf1->Write(0, $course_title_text_8);
$pdf1->SetXY(90, 60);
$pdf1->Write(0, $unit_text_8);
$pdf1->SetXY(110, 60);
$pdf1->Write(0, $repeat_yes_8);
$pdf1->SetXY(115, 60);
$pdf1->Write(0, $repeat_no_8);
$pdf1->SetXY(120, 60);
$pdf1->Write(0, $pass_no_pass_no_8);
$pdf1->SetXY(125, 60);
$pdf1->Write(0, $pass_no_pass_yes_8);
$pdf1->SetXY(15, 65);
$pdf1->Write(0, $dept_cd_text_9);
$pdf1->SetXY(40, 65);
$pdf1->Write(0, $course_title_text_9);
$pdf1->SetXY(90, 65);
$pdf1->Write(0, $unit_text_9);
$pdf1->SetXY(110, 65);
$pdf1->Write(0, $repeat_yes_9);
$pdf1->SetXY(115, 65);
$pdf1->Write(0, $repeat_no_9);
$pdf1->SetXY(120, 65);
$pdf1->Write(0, $pass_no_pass_no_9);
$pdf1->SetXY(125, 65);
$pdf1->Write(0, $pass_no_pass_yes_9);
$pdf1->SetXY(15, 70);
$pdf1->Write(0, $dept_cd_text_10);
$pdf1->SetXY(40, 70);
$pdf1->Write(0, $course_title_text_10);
$pdf1->SetXY(90, 70);
$pdf1->Write(0, $unit_text_10);
$pdf1->SetXY(110, 70);
$pdf1->Write(0, $repeat_yes_10);
$pdf1->SetXY(115, 70);
$pdf1->Write(0, $repeat_no_10);
$pdf1->SetXY(120, 70);
$pdf1->Write(0, $pass_no_pass_no_10);
$pdf1->SetXY(125, 70);
$pdf1->Write(0, $pass_no_pass_yes_10);
$pdf1->SetXY(15, 75);
$pdf1->Write(0, $dept_cd_text_11);
$pdf1->SetXY(40, 75);
$pdf1->Write(0, $course_title_text_11);
$pdf1->SetXY(90, 75);
$pdf1->Write(0, $unit_text_11);
$pdf1->SetXY(110, 75);
$pdf1->Write(0, $repeat_yes_11);
$pdf1->SetXY(115, 75);
$pdf1->Write(0, $repeat_no_11);
$pdf1->SetXY(120, 75);
$pdf1->Write(0, $pass_no_pass_no_11);
$pdf1->SetXY(125, 75);
$pdf1->Write(0, $pass_no_pass_yes_11);
$pdf1->SetXY(15, 80);
$pdf1->Write(0, $dept_cd_text_12);
$pdf1->SetXY(40, 80);
$pdf1->Write(0, $course_title_text_12);
$pdf1->SetXY(90, 80);
$pdf1->Write(0, $unit_text_12);
$pdf1->SetXY(110, 80);
$pdf1->Write(0, $repeat_yes_12);
$pdf1->SetXY(115, 80);
$pdf1->Write(0, $repeat_no_12);
$pdf1->SetXY(120, 80);
$pdf1->Write(0, $pass_no_pass_no_12);
$pdf1->SetXY(125, 80);
$pdf1->Write(0, $pass_no_pass_yes_12);
$pdf1->SetXY(15, 85);
$pdf1->Write(0, $dept_cd_text_13);
$pdf1->SetXY(40, 85);
$pdf1->Write(0, $course_title_text_13);
$pdf1->SetXY(90, 85);
$pdf1->Write(0, $unit_text_13);
$pdf1->SetXY(110, 85);
$pdf1->Write(0, $repeat_yes_13);
$pdf1->SetXY(115, 85);
$pdf1->Write(0, $repeat_no_13);
$pdf1->SetXY(120, 85);
$pdf1->Write(0, $pass_no_pass_no_13);
$pdf1->SetXY(125, 85);
$pdf1->Write(0, $pass_no_pass_yes_13);
$pdf1->SetXY(15, 90);
$pdf1->Write(0, $dept_cd_text_14);
$pdf1->SetXY(40, 90);
$pdf1->Write(0, $course_title_text_14);
$pdf1->SetXY(90, 90);
$pdf1->Write(0, $unit_text_14);
$pdf1->SetXY(110, 90);
$pdf1->Write(0, $repeat_yes_14);
$pdf1->SetXY(115, 90);
$pdf1->Write(0, $repeat_no_14);
$pdf1->SetXY(120, 90);
$pdf1->Write(0, $pass_no_pass_no_14);
$pdf1->SetXY(125, 90);
$pdf1->Write(0, $pass_no_pass_yes_14);
$pdf1->SetXY(15, 95);
$pdf1->Write(0, $dept_cd_text_15);
$pdf1->SetXY(40, 95);
$pdf1->Write(0, $course_title_text_15);
$pdf1->SetXY(90, 95);
$pdf1->Write(0, $unit_text_15);
$pdf1->SetXY(110, 95);
$pdf1->Write(0, $repeat_yes_15);
$pdf1->SetXY(115, 95);
$pdf1->Write(0, $repeat_no_15);
$pdf1->SetXY(120, 95);
$pdf1->Write(0, $pass_no_pass_no_15);
$pdf1->SetXY(125, 95);
$pdf1->Write(0, $pass_no_pass_yes_15);
$pdf1->SetXY(15, 100);
$pdf1->Write(0, $dept_cd_text_16);
$pdf1->SetXY(40, 100);
$pdf1->Write(0, $course_title_text_16);
$pdf1->SetXY(90, 100);
$pdf1->Write(0, $unit_text_16);
$pdf1->SetXY(110, 100);
$pdf1->Write(0, $repeat_yes_16);
$pdf1->SetXY(115, 100);
$pdf1->Write(0, $repeat_no_16);
$pdf1->SetXY(120, 100);
$pdf1->Write(0, $pass_no_pass_no_16);
$pdf1->SetXY(125, 100);
$pdf1->Write(0, $pass_no_pass_yes_16);
$pdf1->SetXY(15, 105);
$pdf1->Write(0, $dept_cd_text_17);
$pdf1->SetXY(40, 105);
$pdf1->Write(0, $course_title_text_17);
$pdf1->SetXY(90, 105);
$pdf1->Write(0, $unit_text_17);
$pdf1->SetXY(110, 105);
$pdf1->Write(0, $repeat_yes_17);
$pdf1->SetXY(115, 105);
$pdf1->Write(0, $repeat_no_17);
$pdf1->SetXY(120, 105);
$pdf1->Write(0, $pass_no_pass_no_17);
$pdf1->SetXY(125, 105);
$pdf1->Write(0, $pass_no_pass_yes_17);
$pdf1->SetXY(15, 110);
$pdf1->Write(0, $dept_cd_text_18);
$pdf1->SetXY(40, 110);
$pdf1->Write(0, $course_title_text_18);
$pdf1->SetXY(90, 110);
$pdf1->Write(0, $unit_text_18);
$pdf1->SetXY(110, 110);
$pdf1->Write(0, $repeat_yes_18);
$pdf1->SetXY(115, 110);
$pdf1->Write(0, $repeat_no_18);
$pdf1->SetXY(120, 110);
$pdf1->Write(0, $pass_no_pass_no_18);
$pdf1->SetXY(125, 110);
$pdf1->Write(0, $pass_no_pass_yes_18);
$pdf1->SetXY(15, 115);
$pdf1->Write(0, $dept_cd_text_19);
$pdf1->SetXY(40, 115);
$pdf1->Write(0, $course_title_text_19);
$pdf1->SetXY(90, 115);
$pdf1->Write(0, $unit_text_19);
$pdf1->SetXY(110, 115);
$pdf1->Write(0, $repeat_yes_19);
$pdf1->SetXY(115, 115);
$pdf1->Write(0, $repeat_no_19);
$pdf1->SetXY(120, 115);
$pdf1->Write(0, $pass_no_pass_no_19);
$pdf1->SetXY(125, 115);
$pdf1->Write(0, $pass_no_pass_yes_19);
$pdf1->SetXY(15, 120);
$pdf1->Write(0, $dept_cd_text_20);
$pdf1->SetXY(40, 120);
$pdf1->Write(0, $course_title_text_20);
$pdf1->SetXY(90, 120);
$pdf1->Write(0, $unit_text_20);
$pdf1->SetXY(110, 120);
$pdf1->Write(0, $repeat_yes_20);
$pdf1->SetXY(115, 120);
$pdf1->Write(0, $repeat_no_20);
$pdf1->SetXY(120, 120);
$pdf1->Write(0, $pass_no_pass_no_20);
$pdf1->SetXY(125, 120);
$pdf1->Write(0, $pass_no_pass_yes_20);
$pdf1->SetXY(15, 125);
$pdf1->Write(0, $dept_cd_text_21);
$pdf1->SetXY(40, 125);
$pdf1->Write(0, $course_title_text_21);
$pdf1->SetXY(90, 125);
$pdf1->Write(0, $unit_text_21);
$pdf1->SetXY(110, 125);
$pdf1->Write(0, $repeat_yes_21);
$pdf1->SetXY(115, 125);
$pdf1->Write(0, $repeat_no_21);
$pdf1->SetXY(120, 125);
$pdf1->Write(0, $pass_no_pass_no_21);
$pdf1->SetXY(125, 125);
$pdf1->Write(0, $pass_no_pass_yes_21);
$pdf1->SetXY(15, 130);
$pdf1->Write(0, $dept_cd_text_22);
$pdf1->SetXY(40, 130);
$pdf1->Write(0, $course_title_text_22);
$pdf1->SetXY(90, 130);
$pdf1->Write(0, $unit_text_22);
$pdf1->SetXY(110, 130);
$pdf1->Write(0, $repeat_yes_22);
$pdf1->SetXY(115, 130);
$pdf1->Write(0, $repeat_no_22);
$pdf1->SetXY(120, 130);
$pdf1->Write(0, $pass_no_pass_no_22);
$pdf1->SetXY(125, 130);
$pdf1->Write(0, $pass_no_pass_yes_22);
$pdf1->SetXY(15, 135);
$pdf1->Write(0, $dept_cd_text_23);
$pdf1->SetXY(40, 135);
$pdf1->Write(0, $course_title_text_23);
$pdf1->SetXY(90, 135);
$pdf1->Write(0, $unit_text_23);
$pdf1->SetXY(110, 135);
$pdf1->Write(0, $repeat_yes_23);
$pdf1->SetXY(115, 135);
$pdf1->Write(0, $repeat_no_23);
$pdf1->SetXY(120, 135);
$pdf1->Write(0, $pass_no_pass_no_23);
$pdf1->SetXY(125, 135);
$pdf1->Write(0, $pass_no_pass_yes_23);
$pdf1->SetXY(15, 140);
$pdf1->Write(0, $dept_cd_text_24);
$pdf1->SetXY(40, 140);
$pdf1->Write(0, $course_title_text_24);
$pdf1->SetXY(90, 140);
$pdf1->Write(0, $unit_text_24);
$pdf1->SetXY(110, 140);
$pdf1->Write(0, $repeat_yes_24);
$pdf1->SetXY(115, 140);
$pdf1->Write(0, $repeat_no_24);
$pdf1->SetXY(120, 140);
$pdf1->Write(0, $pass_no_pass_no_24);
$pdf1->SetXY(125, 140);
$pdf1->Write(0, $pass_no_pass_yes_24);
$pdf1->SetXY(15, 145);
$pdf1->Write(0, $dept_cd_text_25);
$pdf1->SetXY(40, 145);
$pdf1->Write(0, $course_title_text_25);
$pdf1->SetXY(90, 145);
$pdf1->Write(0, $unit_text_25);
$pdf1->SetXY(110, 145);
$pdf1->Write(0, $repeat_yes_25);
$pdf1->SetXY(115, 145);
$pdf1->Write(0, $repeat_no_25);
$pdf1->SetXY(120, 145);
$pdf1->Write(0, $pass_no_pass_no_25);
$pdf1->SetXY(125, 145);
$pdf1->Write(0, $pass_no_pass_yes_25);
$pdf1->SetXY(15, 150);
$pdf1->Write(0, $dept_cd_text_26);
$pdf1->SetXY(40, 150);
$pdf1->Write(0, $course_title_text_26);
$pdf1->SetXY(90, 150);
$pdf1->Write(0, $unit_text_26);
$pdf1->SetXY(110, 150);
$pdf1->Write(0, $repeat_yes_26);
$pdf1->SetXY(115, 150);
$pdf1->Write(0, $repeat_no_26);
$pdf1->SetXY(120, 150);
$pdf1->Write(0, $pass_no_pass_no_26);
$pdf1->SetXY(125, 150);
$pdf1->Write(0, $pass_no_pass_yes_26);
$pdf1->SetXY(15, 155);
$pdf1->Write(0, $dept_cd_text_27);
$pdf1->SetXY(40, 155);
$pdf1->Write(0, $course_title_text_27);
$pdf1->SetXY(90, 155);
$pdf1->Write(0, $unit_text_27);
$pdf1->SetXY(110, 155);
$pdf1->Write(0, $repeat_yes_27);
$pdf1->SetXY(115, 155);
$pdf1->Write(0, $repeat_no_27);
$pdf1->SetXY(120, 155);
$pdf1->Write(0, $pass_no_pass_no_27);
$pdf1->SetXY(125, 155);
$pdf1->Write(0, $pass_no_pass_yes_27);
$pdf1->SetXY(15, 160);
$pdf1->Write(0, $dept_cd_text_28);
$pdf1->SetXY(40, 160);
$pdf1->Write(0, $course_title_text_28);
$pdf1->SetXY(90, 160);
$pdf1->Write(0, $unit_text_28);
$pdf1->SetXY(110, 160);
$pdf1->Write(0, $repeat_yes_28);
$pdf1->SetXY(115, 160);
$pdf1->Write(0, $repeat_no_28);
$pdf1->SetXY(120, 160);
$pdf1->Write(0, $pass_no_pass_no_28);
$pdf1->SetXY(125, 160);
$pdf1->Write(0, $pass_no_pass_yes_28);
$pdf1->SetXY(15, 165);
$pdf1->Write(0, $dept_cd_text_29);
$pdf1->SetXY(40, 165);
$pdf1->Write(0, $course_title_text_29);
$pdf1->SetXY(90, 165);
$pdf1->Write(0, $unit_text_29);
$pdf1->SetXY(110, 165);
$pdf1->Write(0, $repeat_yes_29);
$pdf1->SetXY(115, 165);
$pdf1->Write(0, $repeat_no_29);
$pdf1->SetXY(120, 165);
$pdf1->Write(0, $pass_no_pass_no_29);
$pdf1->SetXY(125, 165);
$pdf1->Write(0, $pass_no_pass_yes_29);
$pdf1->SetXY(15, 170);
$pdf1->Write(0, $dept_cd_text_30);
$pdf1->SetXY(40, 170);
$pdf1->Write(0, $course_title_text_30);
$pdf1->SetXY(90, 170);
$pdf1->Write(0, $unit_text_30);
$pdf1->SetXY(110, 170);
$pdf1->Write(0, $repeat_yes_30);
$pdf1->SetXY(115, 170);
$pdf1->Write(0, $repeat_no_30);
$pdf1->SetXY(120, 170);
$pdf1->Write(0, $pass_no_pass_no_30);
$pdf1->SetXY(125, 170);
$pdf1->Write(0, $pass_no_pass_yes_30);

$pdf1->SetXY(10, 250);
$pdf1->Write(0, "eTriever Unique ID:");
$pdf1->SetXY(48, 250);
$pdf1->Write(0, $rand);
$pdf1->SetXY(110, 250);
$pdf1->Write(0, "Date Timestamp: ".$timestamp);
$pdf1->SetXY(10, 255);
$pdf1->Write(0, "This PDF is for reference, keep it for your records, your data has already been submitted.");

$pdf1->Output('/var/www/etriever/html/pdf/24Intent_To_Grad_NEW_1.pdf', 'F');
class concat_pdf extends FPDI {
    var $files = array();
    function setFiles($files) {
        $this->files = $files;
    }
    function concat() {
        foreach($this->files AS $file) {
            $pagecount = $this->setSourceFile($file);
            for ($i = 1; $i <= $pagecount; $i++) {
                 $tplidx = $this->ImportPage($i);
                 $s = $this->getTemplatesize($tplidx);
                 $this->AddPage($s['w'] > $s['h'] ? 'L' : 'P', array($s['w'], $s['h']));
                 $this->useTemplate($tplidx);
            }
        }
    }
}
$pdf2 = new concat_pdf();
$pdf2->setFiles(array('/var/www/etriever/html/pdf/24Intent_To_Grad_NEW.pdf','/var/www/etriever/html/pdf/24Intent_To_Grad_NEW_1.pdf'));
$pdf2->concat();

$dirPath = "/home/app_etriever/pdf/";

$rs = mkdir( $dirPath, '0777' );
if($rs){
    // print success information
    echo 'was done!';
    echo '<br>folder: <a href="' . $folder . '">' . $folder . '</a>';
    echo '<br>dirPath: ' . $dirPath;
}
else
{
    // print error information
    echo 'an error was occurred. Attempting create folder';
    echo '<br>dirPath: ' . $dirPath;
    echo '<br>php_errormsg: ' . $php_errormsg;
}


$final_destination = "/var/www/etriever/html/pdf/24Intent_To_Grad_NEW_FINAL_".$student_id.".pdf";
$pdf2->Output($final_destination, 'F');
chmod($final_destination, 0777);

$file = $final_destination;

if(file_exists($file)){
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file);
exit;
}
unlink($file);
?>